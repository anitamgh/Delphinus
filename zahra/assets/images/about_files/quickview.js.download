(function(a){function g(e,r,t,o){a.ajax({type:"post",url:"/cart/add.js",data:"quantity="+r+"&id="+e,dataType:"json",beforeSend:function(){showPopup(".loading")},success:function(n){a(".tshopify-popup").removeClass("active"),hidePopup(".quickview-product"),Shopify.getCart(function(l){b(l)})},error:function(n,l){hidePopup(".loading"),a(".error-message").text(a.parseJSON(n.responseText).description),showPopup(".error-popup")}})}window.doAjaxAddToCart=g;function b(e){var r=a("#CartContainer");if(r.empty(),e.item_count===0){r.append("<p>Your cart is currently empty.</p>"),cartCallback(e);return}var t=[],o={},n={},l=a("#CartTemplate").html(),c=Handlebars.compile(l);a.each(e.items,function(s,d){if(d.image!=null)var p=d.image.replace(/(\.[^.]*)$/,"_small$1").replace("http:","");else var p="//cdn.shopify.com/s/assets/admin/no-image-medium-cc9732cb976dd349a0df1d39816fbcc7.gif";o={id:d.variant_id,line:s+1,url:d.url,img:p,name:d.product_title,variation:d.variant_title,properties:d.properties,itemAdd:d.quantity+1,itemMinus:d.quantity-1,itemQty:d.quantity,price:Shopify.formatMoney(d.price,ajaxCartConfig.moneyFormat),vendor:d.vendor},t.push(o)}),n={items:t,note:e.note,totalPrice:Shopify.formatMoney(e.total_price,ajaxCartConfig.moneyFormat)},r.append(c(n)),a("#CartCount").html(e.item_count),a("body").removeClass("drawer--is-loading"),a("body").trigger("ajaxCart.afterCartLoad",e)}function w(e){return e.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}window.convertToSlug=w,a(document).ready(function(){y()}),a(document).on("click",".overlay,.continue-shopping, .close-window",function(){return hidePopup(".tshopify-popup"),setTimeout(function(){a(".loading").removeClass("loaded-content")},500),!1});function y(){a(".btn-quickview").click(function(){showPopup(".loading");var e=a(this).data("id"),r=a(this).closest(".product-info").find(".spr-badge").attr("data-rating")*20+"%";return Shopify.getProduct(e,function(t){var o=a("#quick-view").html();a(".quickview-product").html(o);var n=a(".quickview-product");if(n.find(".product-name a").html(t.title).attr("href",t.url),n.find(".spr-badge .spr-active").css({width:r}),n.find(".des").length>0){var l=t.description.replace(/(<([^>]+)>)/ig,"");l=l.split(" ").splice(0,20).join(" ")+"...",n.find(".des").text(l)}else n.find(".des").remove();n.find(".price").html(Shopify.formatMoney(t.price,window.money_format)),n.find(".product-inner").attr("id","product-"+t.id),n.find(".variants").attr("id","product-actions-"+t.id),n.find(".variants select").attr("id","product-select-"+t.id),t.compare_at_price>t.price?(n.find(".compare-price").html(Shopify.formatMoney(t.compare_at_price_max,window.money_format)).show(),n.find(".price").addClass("on-sale")):(n.find(".compare-price").html(""),n.find(".price").removeClass("on-sale")),t.available?(n.find(".total-price span").html(Shopify.formatMoney(t.price,window.money_format)),v.createQuickViewVariantsSwatch(t,n)):(n.find("select, input, .total-price, .dec, .inc, .variants label").remove(),n.find(".btn-addToCart").text("unavailable").addClass("disabled").attr("disabled","disabled")),qtyProduct(),v.quickViewSlider(t,n),v.initQuickviewAddToCart(),a(".quickview-product").addClass("active"),a(".loading").addClass("loaded-content"),a(".quickview-product .total-price").length>0&&(a(".quickview-product span[class=qtyplus]").on("click",v.updatePricingQuickview),a(".quickview-product span[class=qtyminus]").on("click",v.updatePricingQuickview)),n.find(".owl-carousel").owlCarousel({items:n.find(".owl-carousel").attr("data-items"),dots:!1})}),!1})}window.quickView=y;var v={createQuickViewVariantsSwatch:function(e,r){if(e.variants.length>1){for(var t=0;t<e.variants.length;t++){var o=e.variants[t],n='<option value="'+o.id+'">'+o.title+"</option>";r.find("form.variants > select").append(n)}new Shopify.OptionSelectors("product-select-"+e.id,{product:e,onVariantSelected:selectCallbackQuickview});for(var l=window.file_url.substring(0,window.file_url.lastIndexOf("?")),c=window.asset_url.substring(0,window.asset_url.lastIndexOf("?")),s="",t=0;t<e.options.length;t++){s+='<div class="swatch clearfix" data-option-index="'+t+'">',s+='<div class="header">'+e.options[t].name+"</div>";var d=!1;/Color|Colour/i.test(e.options[t].name)&&(d=!0);for(var p=new Array,u=0;u<e.variants.length;u++){var o=e.variants[u],f=o.options[t],m=w(f),h="swatch-"+t+"-"+m;p.indexOf(f)<0&&(s+='<div data-value="'+f+'" class="swatch-element '+(d?"color":"")+m+(o.available?" available ":" soldout ")+'">',d&&(s+='<div class="tooltip">'+f+"</div>"),s+='<input id="'+h+'" type="radio" name="option-'+t+'" value="'+f+'" '+(u==0?" checked ":"")+(o.available?"":" disabled")+" />",d?s+='<label for="'+h+'" style="background-color: '+m+';"></label>':s+='<label for="'+h+'">'+f+"</label>",s+="</div>",o.available&&a('.quickview-product .swatch[data-option-index="'+t+'"] .'+m).removeClass("soldout").addClass("available").find(":radio").removeAttr("disabled"),p.push(f))}s+="</div>"}r.find("form.variants > select").after(s),r.find(".swatch :radio").change(function(){var C=a(this).closest(".swatch").attr("data-option-index"),q=a(this).val();a(this).closest("form").find(".single-option-selector").eq(C).val(q).trigger("change")}),e.available&&e.options.size>1&&(Shopify.optionsMap={},Shopify.linkOptionSelectors(e))}else{r.find("form.variants > select").remove();var k='<input type="hidden" name="id" value="'+e.variants[0].id+'">';r.find("form.variants").append(k)}},createQuickViewVariants:function(e,r){if(e.variants.length>1){for(var t=0;t<e.variants.length;t++){var o=e.variants[t],n='<option value="'+o.id+'">'+o.title+"</option>";r.find("form.variants > select").append(n)}new Shopify.OptionSelectors("product-select-"+e.id,{product:e,onVariantSelected:selectCallbackQuickview}),a(".quickview-product .single-option-selector").selectize(),a(".quickview-product .selectize-input input").attr("disabled","disabled"),e.options.length==1&&a(".selector-wrapper:eq(0)").prepend("<label>"+e.options[0].name+"</label>"),r.find("form.variants .selector-wrapper label").each(function(c,s){a(this).html(e.options[c].name)})}else{r.find("form.variants > select").remove();var l='<input type="hidden" name="id" value="'+e.variants[0].id+'">';r.find("form.variants").append(l)}},quickViewSlider:function(e,r){var t=Shopify.resizeImage(e.featured_image,"grande");if(r.find(".featured-image").append('<a title="'+e.title+'" class="product-photo" href="'+e.url+'"><img src="'+t+'" alt="'+e.title+'"/><span class="loading" style="height: 100%; width: 100%; top:0; left:0 z-index: 999; position: absolute; display: none; background: url('+window.loading_url+') center no-repeat;"></span></a>'),e.images.length>2){var o=r.find(".more-views .owl-carousel");for(i in e.images){var n=Shopify.resizeImage(e.images[i],"grande"),l=Shopify.resizeImage(e.images[i],"compact"),c='<div class="item"><a href="javascript:void(0)" data-image="'+n+'"><img src="'+l+'"  /></a></div>';o.append(c)}o.find("a").click(function(){var s=r.find(".featured-image img"),d=r.find(".featured-image .loading");s.attr("src")!=a(this).attr("data-image")&&(s.attr("src",a(this).attr("data-image")),d.show(),s.load(function(p){d.hide(),a(this).unbind("load"),d.hide()}))})}else r.find(".more-views").remove()},initQuickviewAddToCart:function(){a(".quickview-product .btn-addToCart").length>0&&a(".quickview-product .btn-addToCart").click(function(){var e=a(".quickview-product select[name=id]").val();e||(e=a(".quickview-product input[name=id]").val());var r=a(".quickview-product input[name=quantity]").val();r||(r=1);var t=a(".quickview-product .product-name a").html(),o=a(".quickview-product .featured-image img").attr("src");g(e,r,t,o)})},updatePricingQuickview:function(){var e=/([0-9]+[.|,][0-9]+[.|,][0-9]+)/g,r=a(".quickview-product .price").text().match(e);if(r||(e=/([0-9]+[.|,][0-9]+)/g,r=a(".quickview-product .price").text().match(e)),r){var t=r[0],o=t.replace(/[.|,]/g,""),n=parseInt(a(".quickview-product input[name=quantity]").val()),l=o*n,c=Shopify.formatMoney(l,window.money_format);e=/([0-9]+[.|,][0-9]+[.|,][0-9]+)/g,c.match(e)||(e=/([0-9]+[.|,][0-9]+)/g),c=c.match(e)[0];var s=new RegExp(t,"g"),d=a(".quickview-product .price").html().replace(s,c);a(".quickview-product .total-price span").html(d)}}}})(jQuery);
//# sourceMappingURL=/s/files/1/1297/1661/t/15/assets/quickview.js.map?v=77550827600660081951466758237
